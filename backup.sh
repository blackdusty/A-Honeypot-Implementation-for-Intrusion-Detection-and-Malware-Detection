#!/bin/bash

#you should first assign the remote server as passwordless authentication
echo ""

#this is remote serve ip
host='user1@192.168.56.103'

#destination directory of remote server
dest='/root/ahmed_01'
src='/home/user1/ahmed'

#create file tagged with Time_Stamp
file=auth-$(date +%F-%T).log
cd $src 
touch $file

#then use cat 'source file 1' 'source file 2' 'source file 3' > 'dest' to concatenate
#this dest file has all log files concatenated
dir='/var/log/secure' 

#we will do check whether size of file 'secure' is greater than zero 
# if not do not backup
if [ -s $dir ];
      then sudo cp $dir $src/$file
	   sudo xz $file
	   scp $src/$file.xz $host:$dest
	   retvalue=$?
	   if [ $retvalue = 0 ]; then
        	   echo "Done"
	   else
        	   echo "Could not copy"
                   echo "Return value: $retvalue"	
	   fi
fi
echo ""
